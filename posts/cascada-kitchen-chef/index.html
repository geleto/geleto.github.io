<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="canonical" href=https://geleto.github.io/posts/cascada-kitchen-chef/>
    <link rel="alternate" type="application/rss+xml" href="/feed.xml" title="Feed">

    <link href="/assets/main.af96226fb914a9e08857.css" rel="stylesheet" />

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet">

    <title>
      The Kitchen Chef&#39;s Guide to Concurrent Programming with Cascada
      
         | Angel Popov&#39;s Blog
      
    </title>

    <link rel="icon" type= “image/x-icon” href="/images/favicon.ico">

    <meta property="og:title" content="The Kitchen Chef&#39;s Guide to Concurrent Programming with Cascada">
    <meta property="og:site_name" content="Angel Popov&#39;s Blog"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://geleto.github.io/posts/cascada-kitchen-chef/"/>
    <meta name="twitter:card" content="summary_large_image">

    
      <meta name="twitter:creator" content="@geleto"/>
    

    
    
    
      <meta name="description" content="Imagine writing code that automatically runs everything in parallel, with zero boilerplate, while making race conditions impossible. Cascada Script inverts traditional programming: it&#39;s parallel by default and sequential by exception. This post explains how it works using a high-end restaurant kitchen as an analogy.">
      <meta property="og:description" content="Imagine writing code that automatically runs everything in parallel, with zero boilerplate, while making race conditions impossible. Cascada Script inverts traditional programming: it&#39;s parallel by default and sequential by exception. This post explains how it works using a high-end restaurant kitchen as an analogy.">
      <meta name="description" content="Imagine writing code that automatically runs everything in parallel, with zero boilerplate, while making race conditions impossible. Cascada Script inverts traditional programming: it&#39;s parallel by default and sequential by exception. This post explains how it works using a high-end restaurant kitchen as an analogy."/>
    

    
    
      <meta property="og:image" content="https://geleto.github.io/images/headers/kitchen_chef_cascada_social.png"/>
      <meta name="twitter:image" content="https://geleto.github.io/images/headers/kitchen_chef_cascada_social.png"/>
    

    
      <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
      <script>mermaid.initialize({startOnLoad:true});</script>
    
  </head>
  <body>
    <div class="layout-wrapper">

      <header class="header">
        <div class="header__content">
          <h1 class="site-title">
            <a href=/>
              Angel Popov&#39;s Blog
            </a>
          </h1>

          
            <nav class="nav">
              <ul class="nav__list">
                
                  
                  

                  

                  

                  <li class="nav-item">
                    <a href="/blog"  >Blog</a>
                  </li>
                
                  
                  

                  

                  

                  <li class="nav-item">
                    <a href="/about"  >About</a>
                  </li>
                
              </ul>
            </nav>

          

        </div>
      </header>

      <main class="main">
        
<article class="post">
  <header class="post__header">
    
      <div class="post__header-image">
        <img src="/images/headers/kitchen_chef_cascada.png" alt="The Kitchen Chef&#39;s Guide to Concurrent Programming with Cascada" class="post__header-img">
      </div>
    
    <h1>The Kitchen Chef&#39;s Guide to Concurrent Programming with Cascada</h1>
    <div class="post__details">
      <time datetime="2025-10-19">
        19 Oct 2025
      </time>
      <span> | </span>
      <span>7 min read</span>
    </div>
  </header>

  <main class="post__content">
    <p>Imagine a restaurant kitchen during dinner rush. Two cooks both preheat the oven - one to 200°C for chicken, another to 250°C for pizza. The last one to touch the dial wins, and someone's food is ruined. That's what programmers call a <strong>race condition</strong>.</p>
<p>The fries come out perfectly crispy, but sit waiting for the burger, turning soggy. That's a <strong>dependency problem</strong> - things finishing out of order.</p>
<p>The chef waits for the risotto before plating anything else, even though three other dishes are ready. That's <strong>unnecessary blocking</strong>.</p>
<p>This timing chaos is exactly what makes concurrent programming hard. <a href="https://github.com/geleto/cascada/blob/master/docs/cascada/script.md">Cascada Script</a> - a new scripting language with JavaScript/TypeScript integration that I've been working on - solves this by inverting the traditional model: it's <strong>parallel by default and in-order by exception</strong>. You write simple, in-order, sequential logic, and it automatically runs independent tasks in parallel while guaranteeing every step happens exactly when its data is ready - unless you explicitly want certain steps to happen one after another.</p>
<p>So let's step into a kitchen during dinner rush and see how this works...</p>
<hr>
<h2>The Problem: The Overwhelmed Chef</h2>
<img src="/images/posts/chef.png" alt="Overwhelmed chef in a busy kitchen" style="float: left; margin-right: 20px; margin-bottom: 10px; max-width: 200px; border-radius: 8px;">
<p>First, imagine a kitchen with a talented Head Chef working alone. He's skilled, but it's painfully slow - he can only do one thing at a time.</p>
<p>So he hires a team. Great! Except now he's a frantic micromanager, constantly checking:
“Is the stock reduced yet? Are those shallots ready? Can I start the sauce now?”</p>
<p>This exhausting coordination is what programmers face with asynchronous code - powerful, but easy to get wrong. Cascada eliminates this chaos by automatically tracking dependencies, so you can write logic naturally while it ensures every step happens exactly when it should.</p>
<hr>
<h2>Why This Problem Gets Worse</h2>
<p>Here's the real challenge: Modern kitchens (and modern applications) aren't preparing single meals - they're handling <strong>dozens of simultaneous orders</strong>. Some customers want their dishes modified. The menu changes seasonally. And here's the kicker: <strong>the ingredients don't all arrive at the same time</strong>.</p>
<p>You're receiving shipments, checking multiple suppliers, and waiting on prep stations - all while trying to get food out fast. The traditional approach forces you to manually coordinate every single dependency: &quot;Wait for the truffle delivery, THEN start the risotto. Wait for the beef to sear, THEN make the pan sauce. But don't wait on the salad - that can happen anytime!&quot;</p>
<p>It's a mental nightmare. What you really need is a system that can handle massive parallelism while automatically understanding what must wait for what.</p>
<hr>
<h2>The Naive Fix: Hire More Cooks</h2>
<p>So the Chef tries the obvious solution: hire more cooks and divide the work.</p>
<p>An order arrives for a full six-course banquet for twelve guests. The chef assigns each course to a different cook: &quot;Everyone start now - we need this done in parallel!&quot;</p>
<p>All five cooks rush to begin simultaneously. It should be beautifully parallel.</p>
<p>Except:</p>
<p>The truffle oil hasn't arrived yet, but Cook A is already frantically searching for it to start the risotto. Cook B fires up twelve steaks at once - three medium-rare, six medium, three well-done. The first few finish perfectly seared, then sit... cooling on the counter, losing their heat and their magic... while he waits for the last well-done steaks to catch up. And because everyone started at the exact same moment, all five cooks need the oven at precisely 6:15pm.</p>
<p>They stand there, waiting their turn. The oven becomes a bottleneck.</p>
<p>Meanwhile, the salad cook finishes in 8 minutes but sits idle for the next 30 while waiting for the entrées. The dessert cook started making soufflés immediately... which collapse by the time the main course is finally ready.</p>
<p>The problem? <strong>Starting everything at once</strong> seems parallel, but it ignores reality: ingredients arrive at different times, customers have different preferences, and shared resources create chaos when everyone hits them simultaneously.</p>
<p>What the kitchen needs isn't just dividing work among cooks - it needs <strong>intelligent orchestration</strong> that starts each task exactly when its ingredients are ready, adapts to each order's requirements, and naturally spreads work across resources.</p>
<hr>
<h2>The Solution: The Cascada Kitchen Manager</h2>
<img src="/images/posts/robot.png" alt="Hard-working robot manager in a busy kitchen" style="float: left; margin-right: 20px; margin-bottom: 10px; max-width: 200px; border-radius: 8px;">
<p>Now, imagine a completely different kitchen. Here, the Head Chef's job is not to manage, but to <strong>design</strong>.</p>
<p>He sits down in a quiet office and writes out the entire, complex banquet recipe. And here is the most crucial part: <strong>he writes it just as he always has, in a simple, sequential, top-to-bottom list of steps. It looks and feels like any other recipe he's ever written.</strong></p>
<p>But this simple-looking recipe is incredibly powerful because <strong>it's a smart, adaptable plan</strong>. The Chef can include rules, choices, and logic as part of his normal, sequential writing:</p>
<ul>
<li>&quot;<strong>If</strong> the season is Winter, use the root vegetables. <strong>Otherwise</strong>, use the summer squash.&quot;</li>
<li>&quot;<strong>For each</strong> of the 12 dinner orders for the main party, prepare one beef medallion to the customer's requested temperature.&quot;</li>
</ul>
<p>The recipe isn't a rigid checklist - it's a flexible blueprint that responds to real-world conditions.</p>
<p>Once this smart, yet familiar-looking recipe is written, his main job is done. He hands it to a brilliant <strong>Kitchen Manager</strong> (that's <a href="https://github.com/geleto/cascada/blob/master/docs/cascada/script.md">Cascada</a>) and can go relax.</p>
<p>The Manager doesn't just read a fixed list. He <strong>interprets this smart recipe in real-time, as things are happening.</strong> He checks the calendar, sees the 12 orders, understands the client's needs, and then executes the Chef's simple, sequential logic with maximum parallelism, handling all the complexity himself.</p>
<hr>
<h2>Understanding Ingredient Dependencies</h2>
<img src="/images/posts/dependencies.png" alt="Ingredient dependencies chart" style="float: left; margin-right: 20px; margin-bottom: 10px; max-width: 200px; border-radius: 8px;">
<p>The Kitchen Manager is smart enough to handle dependencies within this dynamic logic automatically. Imagine the recipe calls for a final pan sauce, which requires three things: the pan the beef was seared in, some sautéed shallots, and the reduced red wine.</p>
<p>He orchestrates a multi-part ballet:</p>
<ul>
<li>He has Assistant D searing the beef.</li>
<li>Simultaneously, he has Assistant E sautéing shallots.</li>
<li>And at the same time, Assistant F is reducing the wine.</li>
<li>He then tells a final assistant, Assistant G: &quot;Stand by. You cannot start your job until the beef is done, the shallots are ready, AND the wine is reduced. The moment all three are finished - no matter the timing - you will combine them to create the final sauce.&quot;</li>
</ul>
<p>While Assistant G is waiting for these multiple inputs, the rest of the kitchen is not waiting with him! Other dishes are being prepped, other sauces are being reduced. This automatic waiting - without blocking anything else - is the fundamental principle that makes the system so efficient.</p>
<p>The Chef never wrote &quot;wait for the beef&quot; or &quot;check if the shallots are ready.&quot; He just wrote the recipe in order. The Manager figured out the dependencies automatically.</p>
<hr>
<h2>When Order is Everything: The Critical Path (!)</h2>
<p>Even within this smart, parallel kitchen, some actions on a <em>single item</em> must happen in a strict sequence. You can't deglaze a pan before you've sautéed the shallots in it.</p>
<p>Right in the middle of the recipe, the Chef can mark specific items with a ! symbol to create what's called a <strong>critical path</strong>.</p>
<p>For example, scattered throughout the recipe you might see:</p>
<ul>
<li><code>Saucepan! Sauté the shallots until translucent.</code></li>
<li>(Many other parallel instructions for different dishes...)</li>
<li><code>Saucepan! Deglaze the pan with brandy.</code></li>
<li>(More parallel work...)</li>
<li><code>Saucepan! Add the stock and reduce by half</code>.</li>
</ul>
<p>When the Kitchen Manager encounters the ! on the <strong>Saucepan</strong>, he assigns one dedicated assistant to follow <em>only</em> the saucepan's instructions, in the exact order they appear. This creates a &quot;single-file line&quot; for that saucepan only, while all other assistants continue their parallel work on steaks, salads, and desserts.</p>
<p>The ! doesn't slow down the kitchen - it just ensures that when order matters for a specific item, that order is guaranteed.</p>
<hr>
<h2>The Final Pass: Plating Station (@)</h2>
<p>Here's a challenge: In our chaotic parallel kitchen, dishes finish in unpredictable order. The beef for Table 5 might be done before Table 3's. The garnish might arrive before the protein. How do you ensure every plate that leaves the kitchen is perfect and consistently presented?</p>
<p>The Chef solves this with the @ symbol, which marks items for the <strong>final pass plating station</strong> - a dedicated area where one master plater assembles each dish only after ALL its components are ready.</p>
<p>Throughout the recipe's logic, you might see lines like this:</p>
<ul>
<li>Beef Medallion @ Place in the center of the plate.</li>
<li>(Logic to determine which vegetable to cook based on season...)</li>
<li>Vegetable @ Arrange artfully next to the medallion.</li>
<li>(More parallel cooking of sauces, sides...)</li>
<li>Pan Sauce @ Drizzle over the medallion.</li>
</ul>
<p>As the Manager interprets the recipe's dynamic logic - perhaps preparing 12 plates because there are 12 guests - he collects every @ instruction he encounters and puts it on a special clipboard.</p>
<p><strong>Only after every single cooking and preparation step in the entire recipe is complete</strong> does the Manager pick up that clipboard and hand it to the final plating station. The plater then reads the @ instructions one-by-one, in the exact order they were collected, and assembles each perfect plate.</p>
<p>This ensures that even though the kitchen is running 50 orders simultaneously with components finishing in chaotic order, every dish that goes out is assembled with perfect consistency and care.</p>
<hr>
<h2>The Domino Effect: Handling Kitchen Disasters</h2>
<p>A perfect recipe assumes a perfect kitchen, but in reality, things go wrong. An oven breaks. A key ingredient is missing. An assistant calls in sick.</p>
<p>Traditional kitchens panic - the whole operation can grind to a halt. But the <a href="https://github.com/geleto/cascada/blob/master/docs/cascada/script.md">Cascada</a> Manager handles disasters with what's called <strong><code>error propagation</code></strong> - a controlled ripple effect that contains problems without stopping the entire kitchen.</p>
<p>Imagine someone discovers the truffles that arrived this morning are actually expired and can't be used. The Manager immediately marks <strong>Truffles</strong> as &quot;contaminated&quot; - or in <a href="https://github.com/geleto/cascada/blob/master/docs/cascada/script.md">Cascada</a> terms, &quot;poisoned&quot; (we use this word figuratively to describe how one bad piece of data makes everything depending on it unusable too). This contamination then flows through the dependency chain: the <strong>Truffle Risotto</strong>, which needs those truffles, automatically becomes &quot;unavailable&quot; as well.</p>
<p>Crucially, the assistants making the steak and salad are unaffected. They never needed truffles, so they continue working at full speed. The problem is perfectly contained.</p>
<h3>Three Ways to Handle Disasters</h3>
<p>The Head Chef has powerful options for dealing with unavailable items:</p>
<p><strong>1. Intervene Immediately:</strong> The moment the truffles become unavailable, a contingency plan can trigger automatically: <em>&quot;Send an assistant to the specialty market to buy more!&quot;</em> If they succeed, the problem is solved and the risotto is back on track. This is perfect for retrying failed operations.</p>
<p><strong>2. Substitute Gracefully:</strong> The recipe itself can have a backup plan built in: <em>&quot;If fresh truffles are unavailable, use high-quality mushroom duxelles instead.&quot;</em> The Manager sees this, makes the substitution, and the problem is stopped before it spreads.</p>
<p><strong>3. Check and Adapt Later:</strong> You can also do nothing immediately. The risotto simply remains &quot;unavailable.&quot; Later, you can check its status and decide how to proceed. Maybe you offer the customer an alternative dish. Or perhaps the truffles finally arrive from a backup supplier - in which case you can restart the risotto preparation with the fresh ingredients. The choice of if, when and how to handle the problem is always yours.</p>
<p>The beauty is that unavailability doesn't cause crashes or confusion - it's just information that flows through the system, letting you respond at the right moment.</p>
<hr>
<h2>The Takeaway: Effortless Parallelism</h2>
<p>You write as if every step were a single, simple action. Yet beneath the surface, the system runs a perfectly choreographed symphony of parallel work.</p>
<p>That's the quiet power of being <em>implicitly parallel by design.</em></p>
<h2>Learn More and Try It Yourself</h2>
<p>📖 <strong>Cascada Script Documentation:</strong> <a href="https://github.com/geleto/cascada/blob/master/docs/cascada/script.md">github.com/geleto/cascada/blob/master/docs/cascada/script.md</a></p>
<p>🧩 <strong>Cascada GitHub Repository:</strong> <a href="https://github.com/geleto/cascada">github.com/geleto/cascada</a></p>
<p>🤖 <strong>Cascador-AI:</strong> <a href="https://github.com/geleto/cascador-ai">github.com/geleto/cascador-ai</a> - an AI orchestration library built on Cascada for effortless, parallel agent and workflow design.</p>
<p>⚡ <strong>Try it now:</strong></p>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> cascada-engine</code></pre>
<hr>

  </main>

  <aside class="post__aside">
    <div class="post__tags">
      
        
        <a href="/tags/cascada/">#cascada</a>
      
        
        <a href="/tags/parallel-programming/">#parallel-programming</a>
      
        
        <a href="/tags/concurrency/">#concurrency</a>
      
        
        <a href="/tags/async/">#async</a>
      
        
        <a href="/tags/programming-languages/">#programming-languages</a>
      
    </div>

    <nav class="post__pagination">

        <a href="/posts/cascada-script-intro/">
          <span>←</span>
          <span>Cascada Script: Parallel by Default, Sequential by Exception</span>
        </a>

      
    </nav>
  </aside>

</article>
      </main>

      <footer class="footer">
        <div class="footer__content">

          <ul class="hero__social-links">
            
              
                

                
                  
                

                <li>
                  <a href="https://github.com/geleto" target="_blank" rel="noopener noreferrer" >GitHub</a>
                </li>
              
                

                
                  
                

                <li>
                  <a href="https://x.com/thegeletohttps://twitter.com/" target="_blank" rel="noopener noreferrer" >X</a>
                </li>
              
                

                
                  
                

                <li>
                  <a href="https://www.linkedin.com/in/angel-popov/" target="_blank" rel="noopener noreferrer" >LinkedIn</a>
                </li>
              
                

                
                  
                

                <li>
                  <a href="https://www.facebook.com/geleto" target="_blank" rel="noopener noreferrer" >Facebook</a>
                </li>
              
            

            

              
                

                
                  
                

                <li>
                  <a href="/feed.xml" target="_blank" rel="noopener noreferrer" >RSS</a>
                </li>
              
            
          </ul>

          
            <p class="footer__attribution">
              <a href="https://www.11ty.dev" target="_blank" rel="noopener">11ty</a> <a href="https://github.com/yinkakun/eleventy-duo" target="_blank" rel="noopener noreferrer"> theme </a> by <a href="https://twitter.com/yinkakun" target="_blank" rel="noopener">Yinka,</a>
            </p>
          

        </div>
      </div>

    </footer>

    <script src="/assets/main.31d6cfe0d16ae931b73c.js"></script>
  </body>
</html>
